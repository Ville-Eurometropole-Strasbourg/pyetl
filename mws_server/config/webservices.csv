!att_tri1;valeur_tri1;att_tri2;valeur_tri2;att_sortie;defaut;att_entree;mode;param1;param2;debug;variables;
!============================== bloc webservices ===========================================;;;;;;;;;;;
!===========================================================================================;;;;;;;;;;;
&&#define;#fakelist;valeur;n;;;
!#help;genere une liste d'items numerotes pour les tests;
!#parametres;valeur;texte a reproduire
!#parametres;n;nombre de lignes
!#api;fakelist1;json;
!#api;fakelist2;xml;temp1
!#api;fakelist3;text;
!#api;fakelist4;html;temp2
;;;;xx,t;%valeur%,t;;creobj;tmp;%n%;;
;;;;xx+;;#gid;set;;;
;;;;;;xx;print>;;;
!==============================selections en cascade sur une table===========================;;;;;;;;;;;
&&#define;#dd;base;table;result;p1;p2;p3;
!#help;outil d'interrogation rapide de base de donnees (select conditionnel)
!#help_detaillee;condition = sous la forme champ:valeur -> rajoute les "
!#help_detaillee;condition = sous la forme champ::valeur -> ne rajoute pas les "
!#api;dd;json;
P:p1;;;;P:p1;%p1%;;sub;::;=;
|:;;;;P:p1;%p1%;;sub;:(.*);='\1';
P:p2;;;;P:p2;%p2%;;sub;::;=;
|:;;;;P:p2;%p2%;;sub;:(.*);='\1';
P:p3;;;;P:p3;%p3%;;sub;::;=;
|;;;;P:p3;%p3%;;sub;:(.*);='\1';
|:db:%base%;;;;mws:;;;dbreq;select %result% from %table% where %p1% and %p2% and %p3%;;
|sinon:P:p2;;;;;;;pass;;;
||:db:%base%;;;;mws:;;;dbreq;select %result% from %table% where %p1% and %p2%;;
||sinon:db:%base%;;;;mws:;;;dbreq;select %result% from %table% where %p1%;;
!==================================affichage d une variable==================================;;;;;;;;;;;
&&#define;#var;nom;
!#help;affiche une variable
!#api;var;
!#api;var2;xml;
;;;;mws:;P;%nom%;print;;;
!==================================groupes de parametres==================================;;;;;;;;;;;
&&#define;#params;clef;val;
!#help;liste les parametres d acces aux bases;
!#api;params;json;
;;;;mws:;%val%;;paramgroups;%clef%;
!==================================extraction d un schema==================================;;;;;;;;;;;
!========================================groupes===========================================;;;;;;;;;;;
&&#define;#listegroupes;base;
!#help;liste les groupes d une base;
!#api;listegroupes;json;
<#dbschema;%base%;
;;;;mws:;groupes;;liste_schema>;%base%;
!;;;;;;#groupe;unique-;;;debug
!|:;;;;;;#groupe;print>;;
!========================================classes===========================================;;;;;;;;;;;
&&#define;#listeclasses;base;niveau;
!#help;liste les groupes d une base;
!#parametres;base(S:@params,server,*@);base de donnees a consulter
!#parametres;niveau;schema a consulter;@@listegroupes;%base%@@
!#api;listeclasses;json;
<#dbschema;%base%;%niveau%
;;;;mws:;classes;;liste_schema>;%base%;;
;;;;;;#classe;print;;
!====================================sortie de donnees======================================;;;;;;;;;;;
&&#define;#get;base;niveau;classe;
!#help;extrait des donnees d une table;
!#api;get;json;
!#variables;lire_maxi;enregistrements a lire
<#dbextract;%base%;%niveau%;%classe%;
;;;;;;;sortir;#print;
